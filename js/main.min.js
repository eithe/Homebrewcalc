/*
* ----------------------------------------------------------------------------
* "THE BEER-WARE LICENSE" (Revision 42):
* <eithe@norbrygg> wrote this file.  As long as you retain this notice you
* can do whatever you want with this stuff. If we meet some day, and you think
* this stuff is worth it, you can buy me a beer in return.   Eirik H
* ----------------------------------------------------------------------------
*/

function ms(){var t=getWeight($("#MSGrainWeightInput")),e=getGenericNumberVal($("#MSMashTicknessInput"));if($msVal=$("#MSWCalcValue"),t&&e){var a=0;a=t*(.67+e),setOKOutputValue($msVal,Math.round(10*a)/10)}else setNAOutputValue($msVal)}function tsv(){var t=(getLength($("#TSVDiameterInput"))||0)/2,e=getLength($("#TSVHeightInput")),a=getPercent($("#TSDeadSpaceInput"))||0;if($tsVal=$("#TSVCalcValue"),t&&e){var u=3.1415*(1-a)*Math.pow(t,2)*e/1e3;setOKOutputValue($tsVal,Math.round(100*u)/100)}else setNAOutputValue($tsVal)}function hs(){var t=getPercent($("#HSInitAlphaInput")),e=getGenericNumberVal($("#HSSixMonthLossSelect")),a=getTemp($("#HSStorageTempInput")),u=getGenericNumberVal($("#HSStorageConditionsSelect")),n=getGenericNumberVal($("#HSHopsAge")),l=$("#HSCalcValue");if(t&&e&&a&&u&&n){var e=e/100,r=.0071473518*e*e*e-.00051989349*e*e+.006273602*e-48481808e-12,c=.381996277*Math.exp(.04956630357*a),i=100*t*(1/Math.exp(r*u*c*n));setOKOutputValue(l,Math.round(100*i)/100)}else setNAOutputValue(l)}function acg(t){void 0===t&&(t=!1);var e=getGenericNumberVal($("#ACOGInput")),a=getGenericNumberVal($("#ACSGInput"));if($acgVal=$("#ACCalcValue"),$acbOGEl=$("#ACOGBrixInput"),$acbSGEl=$("#ACSGBrixInput"),!t&&e&&setInputValue($acbOGEl,Math.round(100*convertGravityToBrix(e))/100),!t&&a&&setInputValue($acbSGEl,Math.round(100*convertGravityToBrix(a))/100),a&&e){var u=getAlcohol(a,e);setOKOutputValue($acgVal,Math.round(100*u)/100)}else setNAOutputValue($acgVal)}function acb(){var t=getGenericNumberVal($("#ACOGBrixInput")),e=getGenericNumberVal($("#ACSGBrixInput"));$acgOGEl=$("#ACOGInput"),$acgSGEl=$("#ACSGInput"),t&&setInputValue($acgOGEl,Math.round(1e3*convertBrixToGravity(t))/1e3),e&&setInputValue($acgSGEl,Math.round(1e3*convertBrixToGravity(e))/1e3),acg(!0)}function ht(){var t=getGenericNumberVal($("#HTSGInput")),e=getTemp($("#HTTempInput")),a=getTemp($("#HTCalTempInput"))||0;if($htVal=$("#HTCalcValue"),t&&e&&a){var u=t*((1.00130346-.000134722124*(9*e/5+32)+204052596e-14*Math.pow(9*e/5+32,2)-2.32820948e-9*Math.pow(9*e/5+32,3))/(1.00130346-.000134722124*(9*a/5+32)+204052596e-14*Math.pow(9*a/5+32,2)-2.32820948e-9*Math.pow(9*a/5+32,3)));setOKOutputValue($htVal,Math.round(1e3*u)/1e3)}else setNAOutputValue($htVal)}function ha(){var t=getWeight($("#HAHopsWeightInput")),e=getPercent($("#HAHopsAlphaInput")),a=getPercent($("#HAHopsActualAlphaInput")),u=$("#HACalcValue");if(t&&e&&a){var n=t*e/a;setOKOutputValue(u,Math.round(10*n)/10)}else setNAOutputValue(u)}function st(){var t=getWeight($("#STGrainWeightInput")),e=getTemp($("#STGrainTempInput")),a=getVolume($("#STMashVolumeInput")),u=getTemp($("#STMashTempInput"));if($stVal=$("#STCalcValue"),t&&e&&a&&u){var n=0;n=(u*(a+.41*t)-.41*t*e)/a,setOKOutputValue($stVal,Math.round(10*n)/10)}else setNAOutputValue($stVal)}function wh(){var t=getTemp($("#WHInitialTempInput")),e=getTemp($("#WHDesiredTempInput")),a=getVolume($("#WHVolumeInput")),u=getGenericNumberVal($("#WHPowerInput"));if($whVal=$("#WHCalcValue"),t&&e&&a&&u){var n=0;n=4184*a*(e-t)/u/60,setOKOutputValue($whVal,Math.round(10*n)/10)}else setNAOutputValue($whVal)}function dlw(){var t=getGenericNumberVal($("#DLWInitialGravityInput")),e=getGenericNumberVal($("#DLWDesiredGravityInput")),a=getVolume($("#DLWVolumeInput"));if($dlVal=$("#DLWCalcValue"),t&&e&&a){t-=1,e-=1;var u=t*a/e-a;setOKOutputValue($dlVal,Math.round(100*u)/100)}else setNAOutputValue($dlVal)}function dlg(){var t=getGenericNumberVal($("#DLGInitialGravityInput")),e=getVolume($("#DLGInitVolumeInput")),a=getGenericNumberVal($("#DLGTargetVolumeInput"));if($dlgVal=$("#DLGCalcValue"),t&&a&&e){t-=1;var u=0;u=e*t/a+1,setOKOutputValue($dlgVal,Math.round(1e3*u)/1e3)}else setNAOutputValue($dlgVal)}function rag(){var t=getGenericNumberVal($("#RAGSGInput")),e=getGenericNumberVal($("#RAGOGInput")),a=getGenericNumberVal($("#RAWortFactorInput"));if($ragVal=$("#RAGCalcValue"),$ragAlcVal=$("#RAGAlcCalcValue"),t&&e&&a){var u=convertGravityToBrix(t),n=convertGravityToBrix(e),l=1-.0044993*(n/a)+.0117741*(u/a)+275806e-9*Math.pow(n/a,2)-.00127169*Math.pow(u/a,2)-727999e-11*Math.pow(n/a,3)+632929e-10*Math.pow(u/a,3),r=getAlcohol(l,e);setOKOutputValue($ragVal,Math.round(1e3*l)/1e3),setOKOutputValue($ragAlcVal,Math.round(100*r)/100)}else setNAOutputValue($ragVal),setNAOutputValue($ragAlcVal)}function rab(){var t=getGenericNumberVal($("#RABSGInput")),e=getGenericNumberVal($("#RABOGInput")),a=getGenericNumberVal($("#RAWortFactorInput"));if($rabVal=$("#RABCalcValue"),$rabAlcVal=$("#RABAlcCalcValue"),t&&e&&a){var u=1-.0044993*(e/a)+.0117741*(t/a)+275806e-9*Math.pow(e/a,2)-.00127169*Math.pow(t/a,2)-727999e-11*Math.pow(e/a,3)+632929e-10*Math.pow(t/a,3),n=convertGravityToBrix(u),l=getAlcohol(u,convertBrixToGravity(e));setOKOutputValue($rabVal,Math.round(100*n)/100),setOKOutputValue($rabAlcVal,Math.round(100*l)/100)}else setNAOutputValue($rabVal),setNAOutputValue($rabAlcVal)}function bgBtoG(){var t=getGenericNumberVal($("#BGBrixInput"));if($bgVal=$("#BGBrixToGravityCalcValue"),t){var e=convertBrixToGravity(t);setOKOutputValue($bgVal,Math.round(1e4*e)/1e4)}else setNAOutputValue($bgVal)}function bgGtoB(){var t=getGenericNumberVal($("#BGGravityInput"));if($bgVal=$("#BGGravityToBrixCalcValue"),t){var e=convertGravityToBrix(t);setOKOutputValue($bgVal,Math.round(100*e)/100)}else setNAOutputValue($bgVal)}function setInputValue(t,e){t.val(e),setInputValidation(t,e)}function getWeight(t){var e=parseFloat(t.val(),10);return setInputValidation(t,e),e}function getVolume(t){var e=parseFloat(t.val(),10);return setInputValidation(t,e),e}function getTemp(t){var e=parseFloat(t.val(),10);return setInputValidation(t,e),e}function getLength(t){var e=parseFloat(t.val(),10);return setInputValidation(t,e),e}function getPercent(t){var e=parseFloat(t.val().replace("%",""),10);return 1>e&&(e=100*e),setInputValidation(t,e),e/100}function getGenericNumberVal(t){var e=parseFloat(t.val(),10);return setInputValidation(t,e),e}function getGenericVal(t){var e=t.val();return setInputValidation(t,e),e}function setInputValidation(t,e){var a=t.parents(".form-group");a.removeClass("has-success").removeClass("has-warning").removeClass("has-error"),e&&a.addClass("has-success")}function getRecalcTimeoutFunc(t,e){return function(){$el=$(t),$el.removeClass("hbcResultOK").addClass("hbcResultNA"),$el.text("---"),setTimeout(e,200)}}function setNAOutputValue(t){t.removeClass("hbcResultNA").removeClass("hbcResultOK").addClass("hbcResultNA"),t.text("---")}function setOKOutputValue(t,e){t.removeClass("hbcResultNA").removeClass("hbcResultOK").addClass("hbcResultOK"),t.text(e)}function convertBrixToGravity(t){return 1+t/(258.6-t/258.2*227.1)}function convertGravityToBrix(t){return((182.4601*t-775.6821)*t+1262.7794)*t-669.5622}function getAlcohol(t,e){return 76.08*(e-t)/(1.775-e)*(t/.794)}$().ready(function(){$(".nav-sidebar a").on("click",function(){$(".navbar-toggle").is(":visible")&&$(".sidebar").collapse("toggle")});var t="change keypress paste focus textInput input",e=function(){st()};$("#STGrainWeightInput,#STGrainTempInput,#STMashVolumeInput,#STMashTempInput").on(t,e),$("#STCalcBtn").click(getRecalcTimeoutFunc("#STCalcValue",e));var a=function(){wh()};$("#WHInitialTempInput,#WHDesiredTempInput,#WHVolumeInput,#WHPowerInput").on(t,a),$("#WHCalcBtn").click(getRecalcTimeoutFunc("#WHCalcValue",a));var u=function(){dlw()};$("#DLWInitialGravityInput,#DLWDesiredGravityInput,#DLWVolumeInput").on(t,u),$("#DLWCalcBtn").click(getRecalcTimeoutFunc("#DLWCalcValue",u));var n=function(){dlg()};$("#DLGInitialGravityInput,#DLGInitVolumeInput,#DLGTargetVolumeInput").on(t,n),$("#DLGCalcBtn").click(getRecalcTimeoutFunc("#DLGCalcValue",n));var l=function(){ha()};$("#HAHopsWeightInput,#HAHopsAlphaInput,#HAHopsActualAlphaInput").on(t,l),$("#HACalcBtn").click(getRecalcTimeoutFunc("#HACalcValue",l));var r=function(){hs()};$("#HSInitAlphaInput,#HSSixMonthLossSelect,#HSStorageTempInput,#HSStorageConditionsSelect,#HSHopsAge").on(t,r),$("#HSCalcBtn").click(getRecalcTimeoutFunc("#HSCalcValue",r));var c=function(){ms()};$("#MSGrainWeightInput,#MSMashTicknessInput").on(t,c),$("#MSCalcBtn").click(getRecalcTimeoutFunc("#MSCalcValue",c));var i=function(){rag()};$("#RAGSGInput,#RAGOGInput,#RAWortFactorInput").on(t,i),$("#RAGCalcBtn").click(getRecalcTimeoutFunc("#RAGCalcValue,#RAGAlcCalcValue",i));var o=function(){rab()};$("#RABSGInput,#RABOGInput,#RAWortFactorInput").on(t,o),$("#RABCalcBtn").click(getRecalcTimeoutFunc("#RABCalcValue,#RABAlcCalcValue",o));var p=function(){acg()};$("#ACOGInput,#ACSGInput").on(t,p),$("#ACCalcBtn").click(getRecalcTimeoutFunc("#ACCalcValue",p));var V=function(){acb()};$("#ACOGBrixInput,#ACSGBrixInput").on(t,V);var s=function(){ht()};$("#HTSGInput,#HTTempInput,#HTCalTempInput").on(t,s),$("#HTCalcBtn").click(getRecalcTimeoutFunc("#HTCalcValue",s));var g=function(){bgBtoG()};$("#BGBrixInput").on(t,g),$("#BGBrixToGravityCalcBtn").click(getRecalcTimeoutFunc("#BGBrixToGravityCalcValue",g));var G=function(){bgGtoB()};$("#BGGravityInput").on(t,G),$("#BGGravityToBrixCalcBtn").click(getRecalcTimeoutFunc("#BGGravityToBrixCalcValue",G));var v=function(){tsv()};$("#TSVDiameterInput,#TSVHeightInput,#TSDeadSpaceInput").on(t,v),$("#TSVCalcBtn").click(getRecalcTimeoutFunc("#TSVCalcValue",v))});
